<!DOCTYPE html>
<html>

<head>
    <title>OOF</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="project.css" />
    <link rel="icon" href="favicon.ico">
</head>

<body>
    <div class="navbar">
        <a href="home.html">Home</a>
        <a href="PCB Design and Fabrication.html">PCB Design & Fabrication</a>
        <a href="MouldingnCasting.html">Moulding & Casting</a>
        <div class="dropdown">
            <button class="dropbtn" onclick="window.location.href='myproject.html'">
                My Project
            </button>
            <div class="dropdown-content">
                <a href="myproject.html#box">Box Fabrication [CNC]</a>
                <a href="myproject.html#locker">Locker system</a>
                <a href="myproject.html#PCB">PCB and Electronics</a>
            </div>
        </div>
    </div>

    <div class="contentbackground">
        <div class="grid-container">

            <div class="item1">
                <div class="item1-content">

                    <h1>My Project: ReMediMind</h1>

                    <p>
                        For my final project, I decided to create an intelligent medicine box that can remind the user
                        to take their medicine and keep track of whether they took their medication or not. I decided on
                        this
                        project due to the fact that it is practical and useful. In Singapore, almost everyone has
                        someone in their
                        family who is on long-term medication. It could be due to high blood pressure, diabetes or
                        cancer. I am no different
                        and in order to create something that can help my family members, I settled on this idea. This
                        project
                        consisted of the following parts:
                    </p>
                    <ul>
                        <li>The box and its dividers</li>
                        <li>The PCB along with its electronics (servo motors, LCD, buzzer, ect.)</li>
                        <li>The Locker door opening mechanism</li>
                    </ul>
                    <p>
                        First and foremost, I have to decide how big my overall project is going to be. I took some
                        measurements
                        to give myself some guidelines when designing the medicine box. The first consideration is how I
                        would store the medicine.
                        Realistically, I could only come up with two options, store the medicine (pills) themselve or
                        store the container in its
                        entirety.
                    </p>
                    <img src="pills.jpg" class="stdimg">
                    <p>
                        Due to medication having many different shapes and sizes I decided to store the medicine
                        container in its entirety to
                        accomodate as many different types of medication as possible, even liquid (since they are stored
                        in bottles). With some
                        quick measurements of the medicine container my family members use and some searching on the
                        internet, I decided that a
                        locker size of the dimensions 70mm x 170mm x 100mm would be sufficient. The LCD that I want to
                        install on the center of
                        the box is about 80mm wide due to it requiring a little more space to mount, but I decided to
                        make the centre 20mm wide
                        to give myself more space to work with. Now with these guidelines, it was time for me to make a
                        general sketch of how I
                        want the ReMediMind to look like.
                    </p>
                    <img src="sketch.png" class="stdimg">
                    <p>
                        Above is how I planned for the ReMediMind to look like upon completion. Now, I have to plan how
                        I want to fabricate each part
                        of my project.
                    </p>
                    <ul>
                        <li>The outer walls of the box should be sturdy and rigid, therefore I decided to use the Large
                            Format CNC to fabricate it.</li>
                        <li>The locker doors should be thin AND transparent to allow the User to see their medication
                            therefor I chose to laser cut clear acrylic.</li>
                        <li>The dividers for the lockers should be thin but still rigid therefore I would laser cut wood
                            for that.</li>
                        <li id="box">
                            The locker opening mechanism that I planned to use included a rack and pinion along other
                            things so that would be a mix of laser cutting
                            and 3D-printing.
                        </li>
                    </ul>
                </div>
            </div>

            <div class="item2">
                <div class="item2-content">

                    <h2>Outer Wall [large format CNC router]</h2>
                    <img src="box.png" class="stdimg">
                    <p>
                        Firstly, I used Fusion 360 to model the outer walls of the medicine box. Since the medicine
                        box's front will be where the LCD screen, locker doors and buttons are, I only need 5 sides.
                    </p>

                    <img src="para.png" class="stdimg">
                    <p>
                        I ensured that the design was parametric to ensure that I can easily adjust my model according
                        to the thickness of the wood provided. The reason why there are so many parameters here is to
                        account for the thickness of the dividers as well as the size of the lockers and tabs for
                        interlocking joints.
                    </p>
                    <img src="cncsoftware.jpg" class="stdimg">
                    <p>
                        With the 3D model done, I exported the 2D sketch of each outer wall as a .dxf file and proceeded
                        to the large format CNC to machine the parts. The other parts you see here on screen belong to
                        my classmates as we were machining all our parts together. We imported all our .dxf files onto
                        the VCarve Pro software. There are only a few important settings we have to edit, depth of cut,
                        specify how we want to cut pockets (if there are any), where we want the tabs to be and last but
                        not least, fillet type. The importance of the fillet is to ensure that corners are machined
                        appropriately. This is especially important for interlocking joints as it allows the tabs to be
                        inserted completely.
                    </p>
                    <img src="CNC.gif" class="stdimg">
                    <p>
                        To secure the large piece of wood to the router, we used a power tool to help us screw the wood
                        provided to us to the wood that is already secured onto the router. We then used the controller
                        to set x and y zero as well as the z stop probe to callibrate the top surface height. Last but
                        not least, I switched on the vacuum to ensure that the chips from milling flying out is reduced.
                    </p>
                    <img src="outerwalls.jpg" class="stdimg">
                    <p>
                        Once the CNC machine finished its cutting, I used a chisel and a hammer to get rid of the tabs
                        still attatching my components to the wooden board. As you can see in the image above, this was
                        the result. I then filed the rough edges down and also used sandpaper to smoothen out certain
                        edges. The most important thing for me was to ensure there were no splinters or loose hanging
                        wood as that may come back to bite me in the future. I then used a rubber mallet to help me
                        assemble the outerwalls of the box together as it was quite tight fitting. I chose the rubber
                        mallet to prevent any damage to the surface and made sure to slowly knock/press the pieces into
                        place.
                    </p>
                    <h2>Outer Walls Complete!</h2>
                    <img src="Frontouterwalls.png" class="std2img">
                    <img src="backouterwalls.jpg" class="std2img">
                    <p id="locker">
                        With the outerwalls done, I moved onto laser cutting the other components such as dividers and
                        doors
                    </p>
                </div>
            </div>

            <div class="item3">
                <div class="item3-content">

                    <h2>Locker and door </h2>


                    <p>
                        I decided to fabricate the dividers using wood and the doors using acrylic. The very first step
                        would be to design them using Fusion 360. I decided to continue working on the same file since
                        my outer walls of the medicine box was already designed there and is parametric. This process
                        was not linear at all as designing the dividers took several revisions and re-considerations to
                        lead up to this point. The redesigns could be summerised as such:
                    </p>
                    <ul>
                        <li>Rectangular holes were added at the top to allow the fitting of a servo motor</li>
                        <li>3 Holes added to accomodate hinges</li>
                        <li>Holes for servo motors were moved down to a specific height to allow the mounting of a gear
                            and the fitting of a rack below</li>
                    </ul>

                    <p>
                        The reason why there were these new criterias for the design was due to it clashing with the
                        design of the door opening mechanism or needing more space to fit the hinge or fit the given
                        hole for the locker door.
                    </p>

                    <h2>3D model of dividers</h2>

                    <img src="dividers.png" class="stdimg">

                    <h2>Laser cutting process</h2>

                    <video src="lasercutting.mp4" type="video/mp4" controls muted class="stdimg"></video>

                    <h2>3D-printed hinges</h2>
                    <img src="hinge.jpg" class="stdimg">
                    <p>
                        I needed hinges for my doors which fortunately enough, I found a model of a parametrically
                        designed hinge posted by a user on <a
                            href="https://www.thingiverse.com/thing:2187167">Thingverse</a> and edited it to fit my
                        application. I then 3D-printed the hinge using the available Ultimakers in the FabLab. My
                        biggest advice for 3D-printing this hinge is to set the wall expansion to -0.2 in the Cura
                        slicer to prevent the hinge merging into one piece.
                    </p>

                    <h2>3D model of door</h2>
                    <img src="door.png" class="stdimg">
                    <p>
                        Making the door was a little tedious as I had to make minor adjustments here and there to the 3D
                        model to ensure that the door could fit properly. This led to me needing to re-cut the model
                        several times on the laser cutter.
                    </p>

                    <img src="doorfinal.png" class="stdimg">
                    <p>
                        As mentioned earlier, I chose clear acrylic for the door to allow the User to see their
                        medication. The 3 holes on the door allow me to mount the hindge onto it and the rectangular gap
                        on the side is to fit the hinge through.
                    </p>

                    <h2>Door opening mechanism</h2>

                    <img src="openersketch.png" class="stdimg">
                    <p>
                        For the door opening mechanism, I wanted to try a more challenging method for fun, therefore I
                        decided on a rack and pinion design to open and close the door. Above is a rough sketch of what
                        I had in mind when designing this.
                    </p>

                    <img src="rack.png" class="std2img">
                    <img src="pinion.png" class="std2img">
                    <p>
                        I used Autodesk Inventor's "Generate Spur Gear" function to easily obtain the gear design
                        without needing to do it manually. For the rack, I looked up a datasheet to get the correct
                        dimesions for it. As you can see everything is slowly coming together and I can almost start the
                        assembly for the locker system
                    </p>

                    <img src="openerhinge.png" class="stdimg">
                    <p>
                        As you can see further above, the rack I designed has a long slot at the front, This was to
                        allow me to fix in a movable hinge that could slide along the rack in case the rack
                        over-extends. This was a neccessary precaution as the whole system may buckle or break if no
                        tolerance is given. This little hinge took many attempts for it to work perfectly as intended
                        due to needing to increase/decrease the size or spacing between this joint and the rack.
                        Consequently, this resulted in me needing to re-print the component several times. Fortunately
                        for me, it is small and I did not require that much infill therefore the printing time is below
                        20mins.
                    </p>
                    <img src="racktrack.png" class="stdimg">
                    <p>
                        Last but not least, I have to create a "track" for the rack to ensure it doesnt move out of its
                        intended direction and to secure the rack firmly against the pinion so that they always "bite".
                    </p>

                    <h2><u>Assembly of locker system</u></h2>
                    <h3>Inside locker</h3>
                    <img src="insidelocker.jpg" class="std2img">
                    <img src="insidelocker2.jpg" class="std2img">
                    <h3>Outside locker</h3>
                    <img src="outsidelocker.jpg" class="std2img">
                    <img src="outsidelocker2.jpg" class="std2img">
                </div>
            </div>

            <div class="item4" id="PCB">
                <div class="item4-content">
                    <h2>PCB and Electronics</h2>
                    <img src="attiny3216.png" class="stdimg">
                    <p>
                        Firstly, I had to design the PCB schematic within EAGLE. The schematic is <b>not</b> how the
                        electronic components would be physically arranged, it merely shows how they should be
                        connected. Also, huge thanks to my lecturer Mr Steven Chew and my classmate Zi Hon for helping
                        me out so much for this part of the project. I have learnt so much more about PCB designing and
                        fabrication thanks to them. The very first decision I had to make was to select a chip. I went
                        with the ATtiny3216 due to the fact that it had enough IO pins, PWM pins and it could use the
                        I2C protocol since it had SCL and SDA pins.
                    </p>
                    <img src="charlieplex.png" class="stdimg">
                    <p>
                        A large issue I had at first was the shear amount of buttons and LEDs I wanted to have in my
                        project. This caused me to require an obscene amount of IO pins if I were to wire each
                        electronic component to its own pin. This issue was promptly solved by my lecturer who advised
                        me to use charlieplexing to connect my LEDs. The 8 LEDs I wanted to connect only required 4 IO
                        pins with this method. Basically, I connect the LEDs between two IO pins in unique directions as
                        you can see in the image above. Since LEDs only work with current flowing the correct way, I am
                        able to use code to control which pins are HIGH and which pins are LOW. Since the speed of these
                        instructions extecuting is so quick, it looks as if certain LEDs are switched on simultaneously.
                    </p>
                    <img src="dcsupply.png" class="stdimg">
                    <p>
                        I decided to use an external power supply. Due to having 4 servo motors connected, and servo
                        motors being notorious for introducing a lot of noise into the power supply rails, I added two
                        capacitors to help reduce it. One 10microfarad, the other 100nanofarad.
                    </p>
                    <img src="fry.jpg" class="stdimg">
                    <p>
                        The other reason I used an external power supply is that I did not want to risk frying my
                        microchip. That is just sad.
                    </p>
                    <img src="analogreadbutton.png" class="tallimg">
                    <p>
                        I also figured out a way to greatly reduce the amount of IO pins for the buttons, I used the
                        connection that you can see above to give each button a different resistence when the button is
                        pressed. I then programme the chip to read the analog value. This basically assigned every
                        button a unique range of values which the chip can be programmed to recognise. (side note, in
                        the future I had to reduce the resistor values to about 500 ohms each as 1k ohms was so high
                        that the buttons at the back could not be detected accurately)
                    </p>
                    <img src="pcbscheme.png" class="stdimg">
                    <p>
                        This is the completed schematic of my PCB design. The other components I added were an LCD
                        screen (was OLED at first but I changed it later), a buzzer, several servo motors and the
                        pinouts for the UPDI programmer.
                    </p>
                    <img src="pcbboarddesign.png" class="stdimg">
                    <p>
                        With the help of Zi Hon and Mr Chew, this is the final layout of the board, I ensured that the
                        traces were as big as possible to decrease the chance that the drillbit rips out the traces or
                        the traces becomes too thin for soldering. Also, the green pads you see above will have
                        through-holes at the center to allow solering of the pinouts.
                    </p>
                    <img src="ReMediMind traces v2.png" class="std2img">
                    <img src="ReMediMind CNC holes.png" class="std2img">
                    <p>
                        I then used mods to get the gcode for the through-holes and the traces. This PCB was quite big
                        therefore I had to use a bigger copper clad than normal.
                    </p>
                    <video src="pcb.mp4" type="video/mp4" controls muted class="stdimg"></video>
                    <p>
                        Milling this PCB was exceptionally hard due to the fact that during this point of the module,
                        many PCBs have already been milled and the board underneath supporting the PCBs during milling
                        is no longer leveled and completely flat. Added on with the fact that most bits were worn down
                        and that the board I was milling was larger in size, the height of the board varied
                        significantly from edge to edge (about +0.05mm which is big enough for the v-bit to completely
                        not cut the pcb due to this process being very high-precision). The way I dealt with this issue
                        was to level the v-bit manually by stepping it down slowly and using a piece of paper underneath
                        to check when the v-bit barely touching the surface. I would then start the process of milling
                        and "micro-manage" the operation, everytime the bit goes too low or too high(cutting too deep or
                        not cutting at all), I would stop the cycle, adjust the z-height accordingly by 0.01mm at a
                        time, roll back to gcode to a few lines before the issues occured and continue the cycle.
                        Through this process I managed to get what I would consider a very well-fabricated board given
                        the issues I faced.
                    </p>

                    <img src="pcbfail.jpg" class="stdimg">

                    <p>
                        Next up was soldering, which I unfortunately did not have much/any experience with at that point
                        (other than the ISP programmer). This caused my hands to be very shakey (they still are but now
                        I
                        can manage soldering better), and soldering was an uphill climb. I started by soldering the
                        microchip first.
                    </p>

                    <img src="rage.gif" class="std2img">
                    <img src="pcbfail.jpg" class="std2img">
                    <p>
                        Of course, shortly after starting the soldering process I broke a leg off the microchip and
                        ripped out traces from the PCB.
                    </p>
                    <img src="pepepistol.png" class="std2img">
                    <img src="pcbfail.jpg" class="std2img">
                    <p>
                        This obviously meant that I had to mill another PCB from scratch and restart the process.
                        Looking back at it, if I met with this situation now, I would attempted to use wires to repair
                        the broken traces but back then I did not think of that. Welp, guess I am improving at least.
                    </p>
                    <h3><b><u>Warning: The image(s) shown below are a health hazard.</u></b></h3>
                    <br>
                    <br>
                    <br>
                    <br>
                    <br>
                    <br>
                    <br>
                    <br>
                    <br>
                    <img src="massacre.jpg" class="stdimg">
                    <p>
                        So this section will be long. I want to explain how what seems to be a PCB massacre, occured.
                        Did I run through a fire? Did I fall down the stairs with the PCB? Did I solder this in the
                        middle of a warzone? I have learnt many many... many things from soldering this board.
                    </p>

                    <img src="ragegun.gif" class="std2img">
                    <img src="rip.png" class="std2img">
                    <p>
                        Firstly,
                        through holes are not a very good idea for pinouts, This is due to the pads being easily ripped
                        out when attactching jumper wires to the pins. In the future, I would only use through-holes for
                        static components such as diode, resistors, capacitors, ect. Pinouts however, will be surface
                        mounted instead to prevent the pins from going all the way through the hole and ripping out
                        traces and solder.
                    </p>
                    <img src="peperage.jpg" class="std2img">
                    <img src="dead.png" class="std2img">
                    <p>
                        Secondly, I will try my best to get rid of as much dead copper as possible
                        next time but <b>ONLY</b> those near the microchip. This is due to the fact that it prevents the
                        solder from shorting the microchip's legs to the dead copper. Once, it is connected to the
                        copper between the microchips legs, it is hard to unsolder it since there is very little space
                        to work with.
                    </p>
                    <img src="wire1.png" class="std2img">
                    <img src="wire2.png" class="std2img">
                    <p>
                        Last but not least, I have also learnt the <del>art</del> of using wires to
                        repair/replace broken traces. This has been a life-saver. I am very grateful for Mr Yeo GS for
                        teaching me this and demostrating it to me, my PCB would not be complete if it weren't for his
                        help.
                        <br>
                        <br>
                        This concludes the PCB fabrication part of my final project, to be honest this was indeed the
                        toughest part of the whole project for me and I have completely lost track on the hours I have
                        spent in the FabLab working on this board. But I do not regret it as I really have learnt a lot
                        through this process and I would not have learnt so much if not for pressing forward.
                    </p>

                </div>
            </div>


        </div>
    </div>
</body>

</html>